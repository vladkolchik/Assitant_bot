# üì¶ –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è: –ö–∞–∫ –¥–æ–±–∞–≤–∏—Ç—å —Å–≤–æ–π –º–æ–¥—É–ª—å (plug-and-play)

## 1. –°–æ–∑–¥–∞–π—Ç–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—É –º–æ–¥—É–ª—è

–í –ø–∞–ø–∫–µ `routers/` —Å–æ–∑–¥–∞–π—Ç–µ –ø–æ–¥–ø–∞–ø–∫—É —Å —É–Ω–∏–∫–∞–ª—å–Ω—ã–º –∏–º–µ–Ω–µ–º –≤–∞—à–µ–≥–æ –º–æ–¥—É–ª—è, –Ω–∞–ø—Ä–∏–º–µ—Ä, `my_module`:

```
routers/
  my_module/
    __init__.py
    router.py
    messages.py
    (config.py)         # –µ—Å–ª–∏ –Ω—É–∂–Ω—ã —Å–≤–æ–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
    (keyboards.py)      # –µ—Å–ª–∏ –Ω—É–∂–Ω—ã —Å–≤–æ–∏ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã
    (services/)         # –µ—Å–ª–∏ –µ—Å—Ç—å –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
    (auth/)            # –µ—Å–ª–∏ –º–æ–¥—É–ª—é –Ω—É–∂–Ω–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
```

---

## 2. –†–µ–∞–ª–∏–∑—É–π—Ç–µ —Ä–æ—É—Ç–µ—Ä

–í `router.py`:
- –°–æ–∑–¥–∞–π—Ç–µ –æ–±—ä–µ–∫—Ç `Router` –∏–∑ aiogram.
- –û–ø–∏—à–∏—Ç–µ —Ö–µ–Ω–¥–ª–µ—Ä—ã (–æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∫–æ–º–∞–Ω–¥, —Å–æ–æ–±—â–µ–Ω–∏–π, callback –∏ —Ç.–¥.).
- –ò–º–ø–æ—Ä—Ç–∏—Ä—É–π—Ç–µ —Å–≤–æ–∏ —Å–æ–æ–±—â–µ–Ω–∏—è –∏–∑ `messages.py`.
- –ï—Å–ª–∏ –Ω—É–∂–Ω—ã –≥–ª–æ–±–∞–ª—å–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è (`start`, `no_access`), –∏–º–ø–æ—Ä—Ç–∏—Ä—É–π—Ç–µ –∏—Ö –∏–∑ –∫–æ—Ä–Ω–µ–≤–æ–≥–æ `messages.py`:
  ```python
  from .messages import MESSAGES  # –ª–æ–∫–∞–ª—å–Ω—ã–µ
  from messages import MESSAGES as GLOBAL_MESSAGES  # –≥–ª–æ–±–∞–ª—å–Ω—ã–µ
  ```

**‚ö†Ô∏è –í–∞–∂–Ω–æ –¥–ª—è callback_query –≤ aiogram 3.x:**
```python
from aiogram import F

# –ü—Ä–∞–≤–∏–ª—å–Ω–æ:
@my_module_router.callback_query(F.data == "my_callback")

# –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ:
@my_module_router.callback_query(text="my_callback")  # –°—Ç–∞—Ä—ã–π —Å–∏–Ω—Ç–∞–∫—Å–∏—Å 2.x
```

---

## 3. –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–π—Ç–µ —Ä–æ—É—Ç–µ—Ä –∏ –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ –º–µ–Ω—é

–í `__init__.py` –º–æ–¥—É–ª—è:
```python
from .router import my_module_router

# –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–ª—è –≥–ª–∞–≤–Ω–æ–≥–æ –º–µ–Ω—é (–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û!)
MENU_CONFIG = {
    'text': 'üîß –ú–æ–π –º–æ–¥—É–ª—å',
    'callback_data': 'my_mode',
    'order': 30  # –ø–æ—Ä—è–¥–æ–∫ –≤ –º–µ–Ω—é (10-email, 15-test, 20-id)
}
```

**üî¢ –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è order:**
- `1` - core (–≥–ª–æ–±–∞–ª—å–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã - –ó–ê–†–ï–ó–ï–†–í–ò–†–û–í–ê–ù–û)
- `10` - email_router (–æ—Å–Ω–æ–≤–Ω–æ–π –º–æ–¥—É–ª—å)
- `15-20` - –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ –º–æ–¥—É–ª–∏  
- `25-30` - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –º–æ–¥—É–ª–∏
- `30+` - —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ –º–æ–¥—É–ª–∏ (id, debug –∏ —Ç.–¥.)

**‚ö†Ô∏è –í–ê–ñ–ù–û**: –ó–Ω–∞—á–µ–Ω–∏–µ `1` –∑–∞—Ä–µ–∑–µ—Ä–≤–∏—Ä–æ–≤–∞–Ω–æ –¥–ª—è `core` –º–æ–¥—É–ª—è (–≥–ª–æ–±–∞–ª—å–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã `/start`, `/menu`)

---

## 4. –°–æ–∑–¥–∞–π—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏—è –º–æ–¥—É–ª—è

–í `messages.py`:
```python
MESSAGES = {
    "activation": "üîß –ú–æ–π –º–æ–¥—É–ª—å –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω!",
    "help": "–≠—Ç–æ —Å–ø—Ä–∞–≤–∫–∞ –ø–æ –º–æ–µ–º—É –º–æ–¥—É–ª—é",
    "error": "–û—à–∏–±–∫–∞ –≤ –º–æ–µ–º –º–æ–¥—É–ª–µ"
}
```

---

## 5. –ü—Ä–∏–º–µ—Ä –ø—Ä–æ—Å—Ç–æ–≥–æ –º–æ–¥—É–ª—è

### `router.py`:
```python
from aiogram import Router, F
from aiogram.types import CallbackQuery, Message
from .messages import MESSAGES

my_module_router = Router()

@my_module_router.callback_query(F.data == "my_mode")
async def activate_my_module(callback: CallbackQuery):
    await callback.message.edit_text(MESSAGES["activation"])
    await callback.answer("–ú–æ–¥—É–ª—å –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω!")

@my_module_router.message(F.text.contains("–ø—Ä–∏–≤–µ—Ç"))
async def hello_handler(message: Message):
    await message.reply("–ü—Ä–∏–≤–µ—Ç –∏–∑ –º–æ–µ–≥–æ –º–æ–¥—É–ª—è!")
```

### `messages.py`:
```python
MESSAGES = {
    "activation": "üîß –ú–æ–π –º–æ–¥—É–ª—å –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω!\n\n–ù–∞–ø–∏—à–∏—Ç–µ '–ø—Ä–∏–≤–µ—Ç' –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è.",
}
```

### `__init__.py`:
```python
from .router import my_module_router

MENU_CONFIG = {
    'text': 'üîß –ú–æ–π –º–æ–¥—É–ª—å',
    'callback_data': 'my_mode',
    'order': 30
}
```

---

## 6. üö® –í–∞–∂–Ω—ã–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã

### ‚ùå –ß—Ç–æ –ù–ï–õ–¨–ó–Ø –¥–µ–ª–∞—Ç—å –≤ –º–æ–¥—É–ª—è—Ö:

#### **1. –ì–ª–æ–±–∞–ª—å–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã –≤ –º–æ–¥—É–ª—è—Ö**
```python
# ‚ùå –ó–ê–ü–†–ï–©–ï–ù–û - –Ω–µ –¥–æ–±–∞–≤–ª—è–π—Ç–µ –≤ —Å–≤–æ–∏ –º–æ–¥—É–ª–∏:
@router.message(Command("start"))     # –¢–æ–ª—å–∫–æ –≤ core –º–æ–¥—É–ª–µ!
@router.message(Command("menu"))      # –¢–æ–ª—å–∫–æ –≤ core –º–æ–¥—É–ª–µ!
@router.message(Command("help"))      # –¢–æ–ª—å–∫–æ –≤ core –º–æ–¥—É–ª–µ!
```

**–ü–æ—á–µ–º—É –∑–∞–ø—Ä–µ—â–µ–Ω–æ**: –ï—Å–ª–∏ –≤–∞—à –º–æ–¥—É–ª—å –±—É–¥–µ—Ç —É–¥–∞–ª–µ–Ω, —ç—Ç–∏ –∫–æ–º–∞–Ω–¥—ã –ø–µ—Ä–µ—Å—Ç–∞–Ω—É—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –¥–ª—è –≤—Å–µ–≥–æ –±–æ—Ç–∞.

#### **2. –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –±–µ–∑ —Ñ–∏–ª—å—Ç—Ä–æ–≤**
```python
# ‚ùå –û–ü–ê–°–ù–û - –ø–µ—Ä–µ—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç –í–°–ï —Å–æ–æ–±—â–µ–Ω–∏—è:
@router.message()
async def handle_all_messages(message: Message):

# ‚ùå –û–ü–ê–°–ù–û - –ø–µ—Ä–µ—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç –í–°–ï callback:
@router.callback_query()
async def handle_all_callbacks(callback: CallbackQuery):
```

**–ü–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è**: –í–∞—à –º–æ–¥—É–ª—å –º–æ–∂–µ—Ç "—É–∫—Ä–∞—Å—Ç—å" —Å–æ–æ–±—â–µ–Ω–∏—è, –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–Ω—ã–µ –¥—Ä—É–≥–∏–º –º–æ–¥—É–ª—è–º.

#### **3. –ì–ª–æ–±–∞–ª—å–Ω—ã–µ —Ñ–∞–π–ª—ã –¥–ª—è –º–æ–¥—É–ª—è**
```python
# ‚ùå –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û - —Å–æ–∑–¥–∞–≤–∞—Ç—å –≥–ª–æ–±–∞–ª—å–Ω—ã–µ —Ñ–∞–π–ª—ã:
keyboards/my_module_ui.py      # –î–æ–ª–∂–Ω–æ –±—ã—Ç—å: routers/my_module/keyboards.py
services/my_module_service.py  # –î–æ–ª–∂–Ω–æ –±—ã—Ç—å: routers/my_module/services.py
```

### ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –º–æ–¥—É–ª—è:

#### **1. –ú–æ–¥—É–ª—å –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –ø–æ–ª–Ω–æ—Å—Ç—å—é –∞–≤—Ç–æ–Ω–æ–º–Ω—ã–º**
```
routers/my_module/
‚îú‚îÄ‚îÄ __init__.py         # –≠–∫—Å–ø–æ—Ä—Ç + MENU_CONFIG
‚îú‚îÄ‚îÄ router.py           # –õ–æ–≥–∏–∫–∞ –º–æ–¥—É–ª—è
‚îú‚îÄ‚îÄ messages.py         # –¢–µ–∫—Å—Ç—ã –º–æ–¥—É–ª—è
‚îú‚îÄ‚îÄ keyboards.py        # –ö–ª–∞–≤–∏–∞—Ç—É—Ä—ã –º–æ–¥—É–ª—è (–µ—Å–ª–∏ –Ω—É–∂–Ω—ã)
‚îú‚îÄ‚îÄ services.py         # –°–µ—Ä–≤–∏—Å—ã –º–æ–¥—É–ª—è (–µ—Å–ª–∏ –Ω—É–∂–Ω—ã)
‚îú‚îÄ‚îÄ config.py           # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –º–æ–¥—É–ª—è (–µ—Å–ª–∏ –Ω—É–∂–Ω—ã)
‚îú‚îÄ‚îÄ .env                # –°–µ–∫—Ä–µ—Ç—ã –º–æ–¥—É–ª—è (–µ—Å–ª–∏ –Ω—É–∂–Ω—ã)
‚îî‚îÄ‚îÄ auth/               # OAuth –º–æ–¥—É–ª—è (–µ—Å–ª–∏ –Ω—É–∂–Ω–∞)
```

#### **2. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ —Ñ–∏–ª—å—Ç—Ä—ã**
```python
# ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û:
@router.callback_query(F.data == "my_specific_callback")
@router.message(F.text.contains("keyword"))
@router.message(Command("my_command"))  # –¢–æ–ª—å–∫–æ –∫–æ–º–∞–Ω–¥—ã –≤–∞—à–µ–≥–æ –º–æ–¥—É–ª—è!
```

#### **3. –ü—Ä–∏–Ω—Ü–∏–ø plug-and-play**
- –ú–æ–¥—É–ª—å –º–æ–∂–Ω–æ —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –≤ –¥—Ä—É–≥–æ–π –ø—Ä–æ–µ–∫—Ç –∏ –æ–Ω –∑–∞—Ä–∞–±–æ—Ç–∞–µ—Ç
- –ú–æ–¥—É–ª—å –Ω–µ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –¥—Ä—É–≥–∏—Ö –º–æ–¥—É–ª–µ–π  
- –ú–æ–¥—É–ª—å –º–æ–∂–Ω–æ —É–¥–∞–ª–∏—Ç—å –±–µ–∑ –ø–æ–ª–æ–º–∫–∏ –æ—Å—Ç–∞–ª—å–Ω–æ–≥–æ –±–æ—Ç–∞
- –í—Å–µ —Ä–µ—Å—É—Ä—Å—ã (–∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã, —Å–µ—Ä–≤–∏—Å—ã) –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤–Ω—É—Ç—Ä–∏ –º–æ–¥—É–ª—è

---

## 7. üîÑ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è–º–∏ –∏ –Ω–∞–≤–∏–≥–∞—Ü–∏—è

### **‚ö†Ô∏è –ö–†–ò–¢–ò–ß–ï–°–ö–ò –í–ê–ñ–ù–û: –ö–Ω–æ–ø–∫–∞ "–ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é"**

**–ü—Ä–æ–±–ª–µ–º–∞:** –ú–Ω–æ–≥–∏–µ –º–æ–¥—É–ª–∏ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç –∫–Ω–æ–ø–∫—É "üè† –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é", —á—Ç–æ –ø—Ä–∏–≤–æ–¥–∏—Ç –∫ –±–∞–≥—É - —Ç—Ä–µ–±—É–µ—Ç—Å—è **–¥–≤–∞ –Ω–∞–∂–∞—Ç–∏—è** –¥–ª—è –≤–æ–∑–≤—Ä–∞—Ç–∞ –≤ –º–µ–Ω—é.

#### **‚ùå –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û - —Ç–æ–ª—å–∫–æ –æ—á–∏—Å—Ç–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è:**
```python
@router.callback_query(F.data == "main_menu", StateFilter(MyStates.some_state))
async def exit_mode(callback: CallbackQuery, state: FSMContext):
    await state.clear()
    await callback.answer("–í–æ–∑–≤—Ä–∞—â–∞—é—Å—å –≤ –º–µ–Ω—é!")  # ‚Üê –¢–æ–ª—å–∫–æ –ø–æ–ø-–∞–ø, –ù–ï–¢ –º–µ–Ω—é!
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç –ø–æ–ø-–∞–ø, –Ω–æ –æ—Å—Ç–∞–µ—Ç—Å—è –Ω–∞ —Ç–æ–º –∂–µ —ç–∫—Ä–∞–Ω–µ. –ù—É–∂–Ω–æ –Ω–∞–∂–∞—Ç—å –µ—â–µ —Ä–∞–∑.

#### **‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û - –ø–æ–ª–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞:**

**–í–∞—Ä–∏–∞–Ω—Ç 1: –ü–æ–ª–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)**
```python
@router.callback_query(F.data == "main_menu", StateFilter(MyStates.some_state))
async def exit_mode(callback: CallbackQuery, state: FSMContext):
    """–ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –≤—ã—Ö–æ–¥ –≤ –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é"""
    if not callback.message:
        return
    
    # 1. –û—á–∏—â–∞–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ
    await state.clear()
    
    # 2. –ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ–º –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é
    from keyboards.main_menu import get_main_menu
    
    # 3. –û—Ç–æ–±—Ä–∞–∂–∞–µ–º –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é
    await callback.message.edit_text("üìã –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é:", reply_markup=get_main_menu())  # type: ignore
    await callback.answer("üè† –í–æ–∑–≤—Ä–∞—â–∞–µ–º—Å—è –≤ –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é!")
```

**–í–∞—Ä–∏–∞–Ω—Ç 2: –ù–µ –ø–µ—Ä–µ—Ö–≤–∞—Ç—ã–≤–∞—Ç—å (–¥–ª—è –ø—Ä–æ—Å—Ç—ã—Ö –º–æ–¥—É–ª–µ–π)**
```python
# –ü—Ä–æ—Å—Ç–æ –ù–ï –¥–æ–±–∞–≤–ª—è–π—Ç–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ main_menu –≤ —Å–≤–æ–π –º–æ–¥—É–ª—å
# core –º–æ–¥—É–ª—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±—Ä–∞–±–æ—Ç–∞–µ—Ç –µ–≥–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ
```

### **üèóÔ∏è –†–∞–±–æ—Ç–∞ —Å —Å–æ—Å—Ç–æ—è–Ω–∏—è–º–∏ FSM**

#### **1. –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–π –º–æ–¥—É–ª—è:**
```python
from aiogram.fsm.state import State, StatesGroup

class MyModuleStates(StatesGroup):
    waiting_for_input = State()
    processing_data = State()
    confirming_action = State()
```

#### **2. –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤:**
```python
my_router = Router()

# 1. –ê–∫—Ç–∏–≤–∞—Ü–∏—è –º–æ–¥—É–ª—è (–±–µ–∑ —Å–æ—Å—Ç–æ—è–Ω–∏—è)
@my_router.callback_query(F.data == "my_mode")
async def activate_module(callback: CallbackQuery, state: FSMContext):
    # –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ
    await state.set_state(MyModuleStates.waiting_for_input)
    await callback.message.edit_text("–ú–æ–¥—É–ª—å –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω!", reply_markup=get_back_menu())
    await callback.answer("‚úÖ –ì–æ—Ç–æ–≤ –∫ —Ä–∞–±–æ—Ç–µ!")

# 2. –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ (—Å —Ñ–∏–ª—å—Ç—Ä–æ–º —Å–æ—Å—Ç–æ—è–Ω–∏—è)
@my_router.message(StateFilter(MyModuleStates.waiting_for_input), F.text)
async def handle_input(message: Message, state: FSMContext):
    # –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –≤–≤–æ–¥ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    await state.update_data(user_input=message.text)
    await state.set_state(MyModuleStates.processing_data)
    await message.reply("–û–±—Ä–∞–±–∞—Ç—ã–≤–∞—é –¥–∞–Ω–Ω—ã–µ...")

# 3. –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –≤—ã—Ö–æ–¥ (–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û!)
@my_router.callback_query(F.data == "main_menu", StateFilter(MyModuleStates))
async def exit_module(callback: CallbackQuery, state: FSMContext):
    if not callback.message:
        return
    await state.clear()
    from keyboards.main_menu import get_main_menu
    await callback.message.edit_text("üìã –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é:", reply_markup=get_main_menu())  # type: ignore
    await callback.answer("üè† –í–æ–∑–≤—Ä–∞—â–∞–µ–º—Å—è –≤ –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é!")
```

#### **3. –ö–ª–∞–≤–∏–∞—Ç—É—Ä–∞ –¥–ª—è –≤–æ–∑–≤—Ä–∞—Ç–∞:**
```python
def get_back_menu():
    """–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è –∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞ –¥–ª—è –≤–æ–∑–≤—Ä–∞—Ç–∞ –≤ –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é"""
    return InlineKeyboardMarkup(inline_keyboard=[
        [InlineKeyboardButton(text="üè† –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é", callback_data="main_menu")]
    ])
```

### **üìã –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã –º–æ–¥—É–ª—è —Å —Å–æ—Å—Ç–æ—è–Ω–∏—è–º–∏:**

1. **–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–π** - `StatesGroup` –∫–ª–∞—Å—Å
2. **–ê–∫—Ç–∏–≤–∞—Ü–∏—è —Å —É—Å—Ç–∞–Ω–æ–≤–∫–æ–π —Å–æ—Å—Ç–æ—è–Ω–∏—è** - `await state.set_state()`
3. **–û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å —Ñ–∏–ª—å—Ç—Ä–∞–º–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è** - `StateFilter(MyStates.state_name)`
4. **–ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –≤—ã—Ö–æ–¥** - –æ—á–∏—Å—Ç–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è + –ø–æ–∫–∞–∑ –≥–ª–∞–≤–Ω–æ–≥–æ –º–µ–Ω—é
5. **–ö–ª–∞–≤–∏–∞—Ç—É—Ä–∞ –≤–æ–∑–≤—Ä–∞—Ç–∞** - –∫–Ω–æ–ø–∫–∞ "üè† –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é" –Ω–∞ –∫–∞–∂–¥–æ–º —ç–∫—Ä–∞–Ω–µ

### **‚ö° –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:**

#### **–û–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é:**
```python
# ‚úÖ –í—Å–µ–≥–¥–∞ –æ—Ç–≤–µ—á–∞–π—Ç–µ –Ω–∞ callback –Ω–∞–∂–∞—Ç–∏—è
await callback.answer("‚úÖ –î–µ–π—Å—Ç–≤–∏–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ!")  # –ü–æ–ø-–∞–ø
await callback.answer()  # –ú–∏–Ω–∏–º—É–º - —É–±—Ä–∞—Ç—å "—á–∞—Å–∏–∫–∏" –∑–∞–≥—Ä—É–∑–∫–∏
```

#### **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ —Å–æ—Å—Ç–æ—è–Ω–∏—è:**
```python
@my_router.message(StateFilter(MyModuleStates.waiting_for_input))
async def handle_wrong_input(message: Message):
    """–û–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–µ–ø–æ–¥—Ö–æ–¥—è—â–∏—Ö —Å–æ–æ–±—â–µ–Ω–∏–π –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–∏"""
    await message.reply(
        "‚ö†Ô∏è –û–∂–∏–¥–∞–µ—Ç—Å—è —Ç–µ–∫—Å—Ç–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ.\n\n–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑:",
        reply_markup=get_back_menu()
    )
```

#### **–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–∏:**
```python
# –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
await state.update_data(username=message.text, file_id=message.document.file_id)

# –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
data = await state.get_data()
username = data.get("username")
file_id = data.get("file_id")
```

---

## 8. üîê –ú–æ–¥—É–ª—å–Ω–∞—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è (–¥–ª—è –≤–Ω–µ—à–Ω–∏—Ö API)

–ï—Å–ª–∏ –≤–∞—à –º–æ–¥—É–ª—å —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –≤–Ω–µ—à–Ω–∏–º–∏ —Å–µ—Ä–≤–∏—Å–∞–º–∏ (Google API, Discord API –∏ —Ç.–¥.), —Å–æ–∑–¥–∞–π—Ç–µ –ø–∞–ø–∫—É `auth/`:

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –º–æ–¥—É–ª—è —Å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–µ–π:
```
routers/
  my_api_module/
    __init__.py
    router.py
    messages.py
    auth/                    # –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –º–æ–¥—É–ª—è
      __init__.py
      auth_manager.py        # –ú–µ–Ω–µ–¥–∂–µ—Ä –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
      script.py             # –°–∫—Ä–∏–ø—Ç –ø–æ–ª—É—á–µ–Ω–∏—è —Ç–æ–∫–µ–Ω–æ–≤
      client_secret.json    # –ö–æ–Ω—Ñ–∏–≥–∏ API
      token.pkl            # –¢–æ–∫–µ–Ω—ã (—Å–æ–∑–¥–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)
```

### –ü—Ä–∏–º–µ—Ä auth_manager.py:
```python
"""
–ú–µ–Ω–µ–¥–∂–µ—Ä –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –¥–ª—è –≤–∞—à–µ–≥–æ API
"""
import pickle
import logging
from pathlib import Path

logger = logging.getLogger(__name__)

class MyAPIAuthManager:
    def __init__(self, auth_dir: str | None = None):
        if auth_dir:
            self.auth_dir = Path(auth_dir)
        else:
            self.auth_dir = Path(__file__).parent
        
        self.token_file = self.auth_dir / "token.pkl"
        self.config_file = self.auth_dir / "client_secret.json"
        self.auth_dir.mkdir(exist_ok=True)
    
    def load_credentials(self):
        """–ó–∞–≥—Ä—É–∂–∞–µ—Ç —Ç–æ–∫–µ–Ω—ã –∏–∑ —Ñ–∞–π–ª–∞"""
        try:
            with open(self.token_file, "rb") as f:
                return pickle.load(f)
        except FileNotFoundError:
            logger.error(f"–¢–æ–∫–µ–Ω –Ω–µ –Ω–∞–π–¥–µ–Ω: {self.token_file}")
            return None
    
    def save_credentials(self, creds):
        """–°–æ—Ö—Ä–∞–Ω—è–µ—Ç —Ç–æ–∫–µ–Ω—ã –≤ —Ñ–∞–π–ª"""
        with open(self.token_file, "wb") as f:
            pickle.dump(creds, f)
        logger.info(f"–¢–æ–∫–µ–Ω —Å–æ—Ö—Ä–∞–Ω–µ–Ω: {self.token_file}")
    
    def is_authorized(self):
        """–ü—Ä–æ–≤–µ—Ä—è–µ—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é"""
        creds = self.load_credentials()
        return creds is not None
```

### –ü—Ä–∏–º–µ—Ä script.py –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏:
```python
"""
–°–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –¥–ª—è –≤–∞—à–µ–≥–æ API
"""
from pathlib import Path
import pickle

def main():
    auth_dir = Path(__file__).parent
    print(f"üîê –ù–∞—á–∏–Ω–∞–µ–º –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é...")
    
    # –ó–¥–µ—Å—å –≤–∞—à–∞ –ª–æ–≥–∏–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è —Ç–æ–∫–µ–Ω–æ–≤
    # –ù–∞–ø—Ä–∏–º–µ—Ä, OAuth flow, API –∫–ª—é—á–∏ –∏ —Ç.–¥.
    
    token = "your_api_token_here"
    
    with open(auth_dir / "token.pkl", "wb") as f:
        pickle.dump(token, f)
    
    print(f"‚úÖ –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞!")

if __name__ == "__main__":
    main()
```

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ –º–æ–¥—É–ª–µ:
```python
# –í router.py
from .auth import MyAPIAuthManager

auth_manager = MyAPIAuthManager()

@my_module_router.callback_query(F.data == "my_mode")
async def activate_module(callback: CallbackQuery):
    if not auth_manager.is_authorized():
        await callback.message.edit_text(
            "‚ùå –¢—Ä–µ–±—É–µ—Ç—Å—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è!\n"
            f"–í—ã–ø–æ–ª–Ω–∏—Ç–µ: python {auth_manager.auth_dir}/script.py"
        )
        return
    
    # –û—Å–Ω–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞ –º–æ–¥—É–ª—è
    await callback.message.edit_text("‚úÖ –ú–æ–¥—É–ª—å —Ä–∞–±–æ—Ç–∞–µ—Ç!")
```

---

## 9. üîß –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –ö–Ω–æ–ø–∫–∞ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ callback_data** –≤ `MENU_CONFIG` –∏ —Ö–µ–Ω–¥–ª–µ—Ä–µ:
   ```python
   # –í __init__.py
   'callback_data': 'my_mode'
   
   # –í router.py  
   @router.callback_query(F.data == "my_mode")  # –î–æ–ª–∂–Ω–æ —Å–æ–≤–ø–∞–¥–∞—Ç—å!
   ```

2. **–£–±–µ–¥–∏—Ç–µ—Å—å –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–µ aiogram 3.x:**
   ```python
   # ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ
   @router.callback_query(F.data == "my_mode")
   
   # ‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ (aiogram 2.x)
   @router.callback_query(text="my_mode")
   ```

### –ú–æ–¥—É–ª—å –Ω–µ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è
1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –≤ `__init__.py` –µ—Å—Ç—å —ç–∫—Å–ø–æ—Ä—Ç —Ä–æ—É—Ç–µ—Ä–∞:**
   ```python
   from .router import my_module_router  # –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ!
   ```

2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∏–º—è —Ä–æ—É—Ç–µ—Ä–∞** - –¥–æ–ª–∂–Ω–æ –∑–∞–∫–∞–Ω—á–∏–≤–∞—Ç—å—Å—è –Ω–∞ `_router`:
   ```python
   my_module_router = Router()  # ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ
   my_module = Router()         # ‚ùå –ù–µ –∑–∞–≥—Ä—É–∑–∏—Ç—Å—è
   ```

### –ö–æ–Ω—Ñ–ª–∏–∫—Ç—ã –º–µ–∂–¥—É –º–æ–¥—É–ª—è–º–∏
1. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ñ–∏–ª—å—Ç—Ä—ã** –¥–ª—è –∏–∑–±–µ–∂–∞–Ω–∏—è –ø–µ—Ä–µ—Ö–≤–∞—Ç–∞ —á—É–∂–∏—Ö callback:
   ```python
   # ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ - —Ç–æ–ª—å–∫–æ —Å–≤–æ–∏ callback
   @router.callback_query(F.data == "my_mode")
   
   # ‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ - –ø–µ—Ä–µ—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç –í–°–ï callback
   @router.callback_query()
   ```

2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç—å callback_data** –º–µ–∂–¥—É –º–æ–¥—É–ª—è–º–∏

### –ü—Ä–æ–±–ª–µ–º—ã —Å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–µ–π
1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—É—Ç–∏ –∫ —Ñ–∞–π–ª–∞–º** –≤ auth_manager
2. **–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Å–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ —Å–æ–∑–¥–∞–µ—Ç —Ç–æ–∫–µ–Ω—ã –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –ø–∞–ø–∫–µ**
3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞** –∫ –ø–∞–ø–∫–µ auth/

---

## 10. üîê –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ–∫—Ä–µ—Ç–∞–º–∏ –∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –æ–∫—Ä—É–∂–µ–Ω–∏—è

### üìÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –º–æ–¥—É–ª—è —Å —Å–µ–∫—Ä–µ—Ç–∞–º–∏:
```
routers/
  my_api_module/
    __init__.py
    router.py
    config.py           # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –º–æ–¥—É–ª—è
    .env                # –°–µ–∫—Ä–µ—Ç—ã –º–æ–¥—É–ª—è (–Ω–µ –ø–æ–ø–∞–¥–µ—Ç –≤ git)
    .env.example        # –®–∞–±–ª–æ–Ω –¥–ª—è –¥—Ä—É–≥–∏—Ö —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤
    messages.py
    auth/               # (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) –¥–ª—è OAuth —Ç–æ–∫–µ–Ω–æ–≤
```

### üåç –ü—Ä–∏–Ω—Ü–∏–ø—ã —Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–∫:

**–ì–ª–æ–±–∞–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ (–∫–æ—Ä–Ω–µ–≤–æ–π `.env`):**
- `BOT_TOKEN` - —Ç–æ–∫–µ–Ω Telegram –±–æ—Ç–∞
- `ALLOWED_USER_IDS` - —Ä–∞–∑—Ä–µ—à–µ–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏
- –û–±—â–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏, –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –≤—Å–µ–º –±–æ—Ç–æ–º

**–ú–æ–¥—É–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ (–ª–æ–∫–∞–ª—å–Ω—ã–π `.env`):**
- API –∫–ª—é—á–∏ –≤–∞—à–µ–≥–æ —Å–µ—Ä–≤–∏—Å–∞
- –°–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ URL –∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
- –¢–æ–∫–µ–Ω—ã OAuth –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –º–æ–¥—É–ª—è

### üìù –ü—Ä–∏–º–µ—Ä —Å–æ–∑–¥–∞–Ω–∏—è –º–æ–¥—É–ª—è —Å —Å–µ–∫—Ä–µ—Ç–∞–º–∏:

#### 1. –°–æ–∑–¥–∞–π—Ç–µ `.env.example` (—à–∞–±–ª–æ–Ω):
```env
# –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –≤ .env –∏ –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –∑–Ω–∞—á–µ–Ω–∏—è
MY_API_KEY=your_api_key_here
MY_SERVICE_URL=https://api.example.com
MY_WEBHOOK_SECRET=webhook_secret_here
```

#### 2. –°–æ–∑–¥–∞–π—Ç–µ `config.py` –º–æ–¥—É–ª—è:
```python
"""
–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è my_api_module
"""
import os
from pathlib import Path
from dotenv import load_dotenv

# –ó–∞–≥—Ä—É–∂–∞–µ–º –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏–∑ .env —Ñ–∞–π–ª–∞ –º–æ–¥—É–ª—è
module_dir = Path(__file__).parent
env_path = module_dir / '.env'

if env_path.exists():
    load_dotenv(env_path)
else:
    print(f"‚ö†Ô∏è  –§–∞–π–ª .env –Ω–µ –Ω–∞–π–¥–µ–Ω –≤ {module_dir}")
    print(f"üìã –°–∫–æ–ø–∏—Ä—É–π—Ç–µ .env.example –≤ .env –∏ –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –∑–Ω–∞—á–µ–Ω–∏—è")

# –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –º–æ–¥—É–ª—è
MY_API_KEY = os.getenv("MY_API_KEY")
MY_SERVICE_URL = os.getenv("MY_SERVICE_URL") 
MY_WEBHOOK_SECRET = os.getenv("MY_WEBHOOK_SECRET")

# –í–∞–ª–∏–¥–∞—Ü–∏—è –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö
REQUIRED_VARS = {
    "MY_API_KEY": MY_API_KEY,
    "MY_SERVICE_URL": MY_SERVICE_URL,
}

missing_vars = [name for name, value in REQUIRED_VARS.items() if not value]
if missing_vars:
    raise ValueError(f"–û—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ: {', '.join(missing_vars)}")

# –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –º–æ–¥—É–ª—è
MODULE_CONFIG = {
    'api_key': MY_API_KEY,
    'service_url': MY_SERVICE_URL,
    'webhook_secret': MY_WEBHOOK_SECRET,
    'timeout': 30,  # —Å–µ–∫—É–Ω–¥—ã
}
```

#### 3. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –≤ `router.py`:
```python
from .config import MODULE_CONFIG, MY_API_KEY
import httpx

@my_module_router.callback_query(F.data == "my_mode")
async def activate_module(callback: CallbackQuery):
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ API –∫–ª—é—á –Ω–∞—Å—Ç—Ä–æ–µ–Ω
    if not MY_API_KEY:
        await callback.message.edit_text(
            "‚ùå –ú–æ–¥—É–ª—å –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω!\n"
            "–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª .env –≤ –ø–∞–ø–∫–µ –º–æ–¥—É–ª—è"
        )
        return
    
    # –ò—Å–ø–æ–ª—å–∑—É–µ–º API
    async with httpx.AsyncClient() as client:
        response = await client.get(
            MODULE_CONFIG['service_url'],
            headers={'Authorization': f'Bearer {MY_API_KEY}'}
        )
```

### üîß –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:

–í README –º–æ–¥—É–ª—è –æ–±—ä—è—Å–Ω–∏—Ç–µ:
```markdown
## –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–µ–∫—Ä–µ—Ç–æ–≤

1. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ `.env.example` –≤ `.env`:
   ```bash
   cp routers/my_module/.env.example routers/my_module/.env
   ```

2. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –≤ `.env`:
   ```env
   MY_API_KEY=–≤–∞—à_–Ω–∞—Å—Ç–æ—è—â–∏–π_–∫–ª—é—á
   MY_SERVICE_URL=https://real-api.com
   ```

3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç–∞ - –º–æ–¥—É–ª—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–≥—Ä—É–∑–∏—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
```

### ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –º–æ–º–µ–Ω—Ç—ã:

1. **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**: –§–∞–π–ª—ã `.env` –≤ –º–æ–¥—É–ª—è—Ö –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏—Å–∫–ª—é—á–µ–Ω—ã –∏–∑ git
2. **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**: –í—Å–µ–≥–¥–∞ —Å–æ–∑–¥–∞–≤–∞–π—Ç–µ `.env.example` –¥–ª—è –¥—Ä—É–≥–∏—Ö —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤
3. **–í–∞–ª–∏–¥–∞—Ü–∏—è**: –ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ –º–æ–¥—É–ª—è
4. **–ò–∑–æ–ª—è—Ü–∏—è**: –ú–æ–¥—É–ª–∏ –Ω–µ –≤–∏–¥—è—Ç —Å–µ–∫—Ä–µ—Ç—ã –¥—Ä—É–≥ –¥—Ä—É–≥–∞
5. **Fallback**: –ü—Ä–µ–¥—É—Å–º–æ—Ç—Ä–∏—Ç–µ –ø–æ–Ω—è—Ç–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö
6. **–ú–æ–¥—É–ª—å–Ω–æ—Å—Ç—å**: –ù–ï —Å–æ–∑–¥–∞–≤–∞–π—Ç–µ –≥–ª–æ–±–∞–ª—å–Ω—ã–µ —Ñ–∞–π–ª—ã –¥–ª—è —Å–≤–æ–µ–≥–æ –º–æ–¥—É–ª—è (keyboards/my_module.py, services/my_module.py)
7. **–õ–æ–∫–∞–ª—å–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã**: –ö–ª–∞–≤–∏–∞—Ç—É—Ä—ã, —Å–µ—Ä–≤–∏—Å—ã, –∫–æ–Ω—Ñ–∏–≥–∏ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –≤–Ω—É—Ç—Ä–∏ –º–æ–¥—É–ª—è

---

## 11. üìã –ß–µ–∫-–ª–∏—Å—Ç —Å–æ–∑–¥–∞–Ω–∏—è –º–æ–¥—É–ª—è

### –ë–∞–∑–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞:
- [ ] –°–æ–∑–¥–∞–Ω–∞ –ø–∞–ø–∫–∞ `routers/my_module/`
- [ ] –°–æ–∑–¥–∞–Ω `__init__.py` —Å —ç–∫—Å–ø–æ—Ä—Ç–æ–º —Ä–æ—É—Ç–µ—Ä–∞ –∏ `MENU_CONFIG`
- [ ] –°–æ–∑–¥–∞–Ω `router.py` —Å –æ–±—ä–µ–∫—Ç–æ–º Router
- [ ] –°–æ–∑–¥–∞–Ω `messages.py` —Å —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏
- [ ] –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Å–∏–Ω—Ç–∞–∫—Å–∏—Å aiogram 3.x (`F.data == "callback"`)
- [ ] Callback_data —É–Ω–∏–∫–∞–ª–µ–Ω –∏ —Å–æ–≤–ø–∞–¥–∞–µ—Ç –≤ `MENU_CONFIG` –∏ —Ö–µ–Ω–¥–ª–µ—Ä–µ
- [ ] –î–æ–±–∞–≤–ª–µ–Ω—ã —Ñ–∏–ª—å—Ç—Ä—ã –¥–ª—è –∏–∑–±–µ–∂–∞–Ω–∏—è –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤

### –°–æ—Å—Ç–æ—è–Ω–∏—è –∏ –Ω–∞–≤–∏–≥–∞—Ü–∏—è (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è):
- [ ] –û–ø—Ä–µ–¥–µ–ª–µ–Ω `StatesGroup` –∫–ª–∞—Å—Å –¥–ª—è —Å–æ—Å—Ç–æ—è–Ω–∏–π –º–æ–¥—É–ª—è
- [ ] –î–æ–±–∞–≤–ª–µ–Ω –∏–º–ø–æ—Ä—Ç `from aiogram.fsm.state import State, StatesGroup`
- [ ] –î–æ–±–∞–≤–ª–µ–Ω –∏–º–ø–æ—Ä—Ç `from aiogram.fsm.context import FSMContext`
- [ ] –î–æ–±–∞–≤–ª–µ–Ω –∏–º–ø–æ—Ä—Ç `from aiogram.filters import StateFilter`
- [ ] –ê–∫—Ç–∏–≤–∞—Ü–∏—è –º–æ–¥—É–ª—è —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ: `await state.set_state()`
- [ ] –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç —Ñ–∏–ª—å—Ç—Ä—ã —Å–æ—Å—Ç–æ—è–Ω–∏—è: `StateFilter(MyStates.state_name)`
- [ ] **–ö–†–ò–¢–ò–ß–ù–û:** –ü—Ä–∞–≤–∏–ª—å–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è –∫–Ω–æ–ø–∫–∞ "–ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é":
  - [ ] –î–æ–±–∞–≤–ª–µ–Ω –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ `@router.callback_query(F.data == "main_menu", StateFilter(MyStates))`
  - [ ] –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –æ—á–∏—â–∞–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ: `await state.clear()`
  - [ ] –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∏–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç –º–µ–Ω—é: `from keyboards.main_menu import get_main_menu`
  - [ ] –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –º–µ–Ω—é: `await callback.message.edit_text("üìã –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é:", reply_markup=get_main_menu())`
  - [ ] –î–æ–±–∞–≤–ª–µ–Ω `# type: ignore` –¥–ª—è —Ç–∏–ø–∏–∑–∞—Ü–∏–∏
- [ ] –°–æ–∑–¥–∞–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `get_back_menu()` –¥–ª—è –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã –≤–æ–∑–≤—Ä–∞—Ç–∞
- [ ] –í—Å–µ —ç–∫—Ä–∞–Ω—ã –º–æ–¥—É–ª—è –∏–º–µ—é—Ç –∫–Ω–æ–ø–∫—É "üè† –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é"
- [ ] –î–æ–±–∞–≤–ª–µ–Ω—ã –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –Ω–µ–ø–æ–¥—Ö–æ–¥—è—â–∏—Ö —Å–æ–æ–±—â–µ–Ω–∏–π –≤ —Å–æ—Å—Ç–æ—è–Ω–∏—è—Ö
- [ ] –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `await callback.answer()` –¥–ª—è –æ–±—Ä–∞—Ç–Ω–æ–π —Å–≤—è–∑–∏

### –°–µ–∫—Ä–µ—Ç—ã –∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (–µ—Å–ª–∏ –Ω—É–∂–Ω—ã):
- [ ] –°–æ–∑–¥–∞–Ω `.env.example` —Å —à–∞–±–ª–æ–Ω–æ–º –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö
- [ ] –°–æ–∑–¥–∞–Ω `config.py` —Å –∑–∞–≥—Ä—É–∑–∫–æ–π –º–æ–¥—É–ª—å–Ω—ã—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö
- [ ] –î–æ–±–∞–≤–ª–µ–Ω–∞ –≤–∞–ª–∏–¥–∞—Ü–∏—è –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö
- [ ] –ü—Ä–æ–≤–µ—Ä–µ–Ω–∞ –∏–∑–æ–ª—è—Ü–∏—è —Å–µ–∫—Ä–µ—Ç–æ–≤ –º–æ–¥—É–ª—è

### –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è (–µ—Å–ª–∏ –Ω—É–∂–Ω–∞):
- [ ] (–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) –°–æ–∑–¥–∞–Ω–∞ –ø–∞–ø–∫–∞ `auth/` –¥–ª—è –≤–Ω–µ—à–Ω–∏—Ö API
- [ ] –°–æ–∑–¥–∞–Ω `auth_manager.py` –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ç–æ–∫–µ–Ω–∞–º–∏
- [ ] –°–æ–∑–¥–∞–Ω `script.py` –¥–ª—è –ø–µ—Ä–≤–∏—á–Ω–æ–π –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –æ—Ç–ª–∞–¥–∫–∞:
- [ ] –ú–æ–¥—É–ª—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ –±–æ—Ç–∞
- [ ] –ö–Ω–æ–ø–∫–∞ –º–æ–¥—É–ª—è –ø–æ—è–≤–ª—è–µ—Ç—Å—è –≤ –≥–ª–∞–≤–Ω–æ–º –º–µ–Ω—é
- [ ] –ù–∞–∂–∞—Ç–∏–µ –Ω–∞ –∫–Ω–æ–ø–∫—É –∞–∫—Ç–∏–≤–∏—Ä—É–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—É—é —Ñ—É–Ω–∫—Ü–∏—é
- [ ] –ö–Ω–æ–ø–∫–∞ "üè† –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é" —Ä–∞–±–æ—Ç–∞–µ—Ç —Å **–ø–µ—Ä–≤–æ–≥–æ –Ω–∞–∂–∞—Ç–∏—è**
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã –≤—Å–µ –ø—É—Ç–∏ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ –≤ –º–æ–¥—É–ª–µ
- [ ] –ü—Ä–æ–≤–µ—Ä–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –∏ –≤–Ω–µ—à–Ω–∏—Ö API
- [ ] –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –º–æ–¥—É–ª—å –Ω–µ –ø–µ—Ä–µ—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç —á—É–∂–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è
- [ ] –î–æ–±–∞–≤–ª–µ–Ω—ã –æ—Ç–ª–∞–¥–æ—á–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- [ ] –ü—Ä–æ–≤–µ—Ä–µ–Ω–∞ —Ä–∞–±–æ—Ç–∞ —Å –≤—Ä–µ–º–µ–Ω–Ω—ã–º–∏ —Ñ–∞–π–ª–∞–º–∏ –∏ –∏—Ö –æ—á–∏—Å—Ç–∫–∞

---

## 12. üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –æ—Ç–ª–∞–¥–∫–∞ –º–æ–¥—É–ª–µ–π

### **üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–∞–∑–æ–≤–æ–π —Ä–∞–±–æ—Ç—ã –º–æ–¥—É–ª—è:**

#### **1. –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –º–æ–¥—É–ª—è:**
```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç–∞ –∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏
python bot.py

# –î–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å:
# ‚úÖ –ù–∞–π–¥–µ–Ω –º–æ–¥—É–ª—å: my_module
# ‚úÖ –†–æ—É—Ç–µ—Ä –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω: my_module_router
```

#### **2. –ü—Ä–æ–≤–µ—Ä–∫–∞ –º–µ–Ω—é:**
```
/start ‚Üí –í–∞—à –º–æ–¥—É–ª—å –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤ —Å–ø–∏—Å–∫–µ –∫–Ω–æ–ø–æ–∫
–ù–∞–∂–º–∏—Ç–µ –Ω–∞ –∫–Ω–æ–ø–∫—É ‚Üí –î–æ–ª–∂–Ω–∞ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è
```

#### **3. –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏:**
```
–ù–∞–∂–º–∏—Ç–µ "üè† –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é" ‚Üí –î–æ–ª–∂–Ω—ã –≤–µ—Ä–Ω—É—Ç—å—Å—è –≤ –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é –∑–∞ –û–î–ù–û –Ω–∞–∂–∞—Ç–∏–µ
```

### **üêõ –ß–∞—Å—Ç—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –∏ –∏—Ö —Ä–µ—à–µ–Ω–∏—è:**

#### **–ú–æ–¥—É–ª—å –Ω–µ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è:**
```python
# ‚ùå –ß–∞—Å—Ç–∞—è –æ—à–∏–±–∫–∞:
from .router import my_module  # –ù–ï –∑–∞–∫–∞–Ω—á–∏–≤–∞–µ—Ç—Å—è –Ω–∞ _router

# ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ:
from .router import my_module_router
```

#### **–ö–Ω–æ–ø–∫–∞ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
```python
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ callback_data:
MENU_CONFIG = {
    'callback_data': 'my_mode'  # ‚Üê –≠—Ç–æ –¥–æ–ª–∂–Ω–æ —Å–æ–≤–ø–∞–¥–∞—Ç—å
}

@router.callback_query(F.data == "my_mode")  # ‚Üê –° —ç—Ç–∏–º
```

#### **–ú–æ–¥—É–ª—å "–∫—Ä–∞–¥–µ—Ç" —á—É–∂–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è:**
```python
# ‚ùå –û–ø–∞—Å–Ω–æ:
@router.message()  # –ü–µ—Ä–µ—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç –í–°–ï —Å–æ–æ–±—â–µ–Ω–∏—è

# ‚úÖ –ë–µ–∑–æ–ø–∞—Å–Ω–æ:
@router.message(StateFilter(MyStates.waiting_input), F.text)  # –¢–æ–ª—å–∫–æ –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–∏
@router.message(F.text.contains("keyword"))  # –¢–æ–ª—å–∫–æ —Å –∫–ª—é—á–µ–≤—ã–º —Å–ª–æ–≤–æ–º
```

#### **–î–≤–æ–π–Ω–æ–µ –Ω–∞–∂–∞—Ç–∏–µ –¥–ª—è –≤–æ–∑–≤—Ä–∞—Ç–∞ –≤ –º–µ–Ω—é:**
```python
# ‚ùå –ù–µ–ø–æ–ª–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞:
@router.callback_query(F.data == "main_menu", StateFilter(MyStates))
async def exit_mode(callback: CallbackQuery, state: FSMContext):
    await state.clear()
    await callback.answer("–í—ã—Ö–æ–∂—É...")  # ‚Üê –ù–ï–¢ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –º–µ–Ω—é!

# ‚úÖ –ü–æ–ª–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞:
@router.callback_query(F.data == "main_menu", StateFilter(MyStates))
async def exit_mode(callback: CallbackQuery, state: FSMContext):
    if not callback.message:
        return
    await state.clear()
    from keyboards.main_menu import get_main_menu
    await callback.message.edit_text("üìã –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é:", reply_markup=get_main_menu())  # type: ignore
    await callback.answer("üè† –í–æ–∑–≤—Ä–∞—â–∞–µ–º—Å—è –≤ –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é!")
```

### **üìä –û—Ç–ª–∞–¥–æ—á–Ω—ã–µ —Ç–µ—Ö–Ω–∏–∫–∏:**

#### **1. –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–π:**
```python
import logging
logger = logging.getLogger(__name__)

@router.message(StateFilter(MyStates.waiting_input))
async def handle_input(message: Message, state: FSMContext):
    current_state = await state.get_state()
    logger.info(f"–ü–æ–ª—É—á–µ–Ω–æ —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–∏: {current_state}")
    logger.info(f"–¢–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è: {message.text}")
```

#### **2. –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–∞–Ω–Ω—ã—Ö —Å–æ—Å—Ç–æ—è–Ω–∏—è:**
```python
@router.callback_query(F.data == "debug_state")
async def debug_state(callback: CallbackQuery, state: FSMContext):
    current_state = await state.get_state()
    state_data = await state.get_data()
    
    debug_info = f"""
üêõ **–û—Ç–ª–∞–¥–æ—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è:**
–°–æ—Å—Ç–æ—è–Ω–∏–µ: {current_state}
–î–∞–Ω–Ω—ã–µ: {state_data}
"""
    await callback.message.edit_text(debug_info)
```

#### **3. –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏:**
```python
# –î–æ–±–∞–≤—å—Ç–µ –∫–æ–º–∞–Ω–¥—É –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –º–æ–¥—É–ª—è
@router.message(Command("debug_config"))
async def debug_config(message: Message):
    config_info = f"""
üîß **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –º–æ–¥—É–ª—è:**
API –∫–ª—é—á: {"‚úÖ –ù–∞—Å—Ç—Ä–æ–µ–Ω" if MY_API_KEY else "‚ùå –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç"}
Timeout: {MODULE_CONFIG.get('timeout', 'N/A')}
"""
    await message.reply(config_info)
```

### **‚ö° –°–æ–≤–µ—Ç—ã –ø–æ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏:**

1. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ async/await –ø—Ä–∞–≤–∏–ª—å–Ω–æ** - –Ω–µ –±–ª–æ–∫–∏—Ä—É–π—Ç–µ –æ—Å–Ω–æ–≤–Ω–æ–π –ø–æ—Ç–æ–∫
2. **–û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–π—Ç–µ —Ä–∞–∑–º–µ—Ä —Ñ–∞–π–ª–æ–≤** - –ø—Ä–æ–≤–µ—Ä—è–π—Ç–µ –ª–∏–º–∏—Ç—ã –¥–æ –æ–±—Ä–∞–±–æ—Ç–∫–∏
3. **–û–±—Ä–∞–±–∞—Ç—ã–≤–∞–π—Ç–µ –æ—à–∏–±–∫–∏** - –≤—Å–µ–≥–¥–∞ –ø—Ä–µ–¥—É—Å–º–æ—Ç—Ä–∏—Ç–µ try/except –¥–ª—è –≤–Ω–µ—à–Ω–∏—Ö API
4. **–û—á–∏—â–∞–π—Ç–µ —Ä–µ—Å—É—Ä—Å—ã** - —É–¥–∞–ª—è–π—Ç–µ –≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã
5. **–ö—ç—à–∏—Ä—É–π—Ç–µ –¥–∞–Ω–Ω—ã–µ** - –Ω–µ –¥–µ–ª–∞–π—Ç–µ –ø–æ–≤—Ç–æ—Ä–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã –∫ API

### **üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:**

1. **–ù–∏–∫–æ–≥–¥–∞ –Ω–µ –ª–æ–≥–∏—Ä—É–π—Ç–µ API –∫–ª—é—á–∏** - –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `[–°–ö–†–´–¢–û]` –≤ –ª–æ–≥–∞—Ö
2. **–ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è** - –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `ALLOWED_USER_IDS`
3. **–í–∞–ª–∏–¥–∏—Ä—É–π—Ç–µ –≤–≤–æ–¥** - –ø—Ä–æ–≤–µ—Ä—è–π—Ç–µ —Ñ–∞–π–ª—ã –∏ —Ç–µ–∫—Å—Ç –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
4. **–û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–π—Ç–µ —Ä–µ—Å—É—Ä—Å—ã** - —Ä–∞–∑–º–µ—Ä —Ñ–∞–π–ª–æ–≤, —á–∞—Å—Ç–æ—Ç–∞ –∑–∞–ø—Ä–æ—Å–æ–≤

---

## 13. üí° –ü—Ä–∏–º–µ—Ä—ã –≥–æ—Ç–æ–≤—ã—Ö –º–æ–¥—É–ª–µ–π

### –°–∏—Å—Ç–µ–º–Ω—ã–π –º–æ–¥—É–ª—å: `core` 
- **–ù–ï –¢–†–û–ì–ê–ô–¢–ï –ï–ì–û!** - –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –≥–ª–æ–±–∞–ª—å–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã `/start`, `/menu`
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é –≤—Å–µ—Ö –º–æ–¥—É–ª–µ–π
- –í—Å–µ–≥–¥–∞ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –ø–µ—Ä–≤—ã–º –≤ —Å–ø–∏—Å–∫–µ (order: 1)
- –ü—Ä–∏–º–µ—Ä –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã –¥–ª—è –≥–ª–æ–±–∞–ª—å–Ω—ã—Ö –∫–æ–º–∞–Ω–¥

### –ü—Ä–æ—Å—Ç–æ–π –º–æ–¥—É–ª—å: `id_module`
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ —á–∞—Ç–∞
- –û–¥–∏–Ω callback —Ö–µ–Ω–¥–ª–µ—Ä
- –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞

### –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π: `test_module` 
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ä–∞–∑–Ω—ã–µ —Ç–∏–ø—ã —Ñ–∏–ª—å—Ç—Ä–æ–≤
- Callback, —Ç–µ–∫—Å—Ç–æ–≤—ã–µ –∏ —ç–º–æ–¥–∑–∏ —Ö–µ–Ω–¥–ª–µ—Ä—ã
- `callback.answer()` –¥–ª—è –æ–±—Ä–∞—Ç–Ω–æ–π —Å–≤—è–∑–∏

### –°–ª–æ–∂–Ω—ã–π –º–æ–¥—É–ª—å: `email_router`
- –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ Google OAuth
- –†–∞–±–æ—Ç–∞ —Å —Ñ–∞–π–ª–∞–º–∏ –∏ –≤–ª–æ–∂–µ–Ω–∏—è–º–∏
- –°–æ–±—Å—Ç–≤–µ–Ω–Ω–∞—è –ø–∞–ø–∫–∞ `auth/` —Å –º–µ–Ω–µ–¥–∂–µ—Ä–æ–º –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
- –ü—Ä–∏–º–µ—Ä –ø–æ–ª–Ω–æ—Å—Ç—å—é –∞–≤—Ç–æ–Ω–æ–º–Ω–æ–≥–æ –º–æ–¥—É–ª—è —Å —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–º–∏ –∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞–º–∏ –∏ —Å–µ—Ä–≤–∏—Å–∞–º–∏

–ò–∑—É—á–∏—Ç–µ —ç—Ç–∏ –º–æ–¥—É–ª–∏ –¥–ª—è –ø–æ–Ω–∏–º–∞–Ω–∏—è –ª—É—á—à–∏—Ö –ø—Ä–∞–∫—Ç–∏–∫! üìö 