# üì¨ Telegram Email Bot

–ë–æ—Ç –ø–æ–∑–≤–æ–ª—è–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å email-—Å–æ–æ–±—â–µ–Ω–∏—è —Å –≤–ª–æ–∂–µ–Ω–∏—è–º–∏ —á–µ—Ä–µ–∑ Gmail –ø—Ä—è–º–æ –∏–∑ Telegram. –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è OAuth 2.0 –∏ –º–æ–¥—É–ª—å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞.

---

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ –∏–ª–∏ —Å–∫–∞—á–∞–π—Ç–µ –ø—Ä–æ–µ–∫—Ç

### 2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
```bash
pip install -r requirements.txt
```

–ú–∏–Ω–∏–º–∞–ª—å–Ω–æ:
```bash
pip install aiogram python-dotenv google-auth google-auth-oauthlib
```

### 3. –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env` –≤ –∫–æ—Ä–Ω–µ:
```env
BOT_TOKEN=your_telegram_bot_token
ALLOWED_USER_IDS=123456789,987654321
FROM_EMAIL=your_email@gmail.com
```

### 4. –î–æ–±–∞–≤—å—Ç–µ —Ñ–∞–π–ª `client_secret.json`
–°–∫–∞—á–∞–π—Ç–µ –µ–≥–æ –∏–∑ [Google Cloud Console](https://console.cloud.google.com/apis/credentials), –≤–∫–ª—é—á–∏–≤ Gmail API.

### 4.1 –î–æ–±–∞–≤—å—Ç–µ —Å–≤–æ—é –ø–æ—á—Ç—É –≤ —Ç–µ—Å—Ç–µ—Ä—ã –ø—Ä–æ–µ–∫—Ç–∞ 
–ß–µ—Ä–µ–∑ —Ä–∞–∑–¥–µ–ª `Audience`, —Ç–∞–º –≤—ã–±–µ—Ä–∏—Ç–µ `Add users` –ø–æ–¥ –∑–∞–≥–æ–ª–æ–≤–∫–æ–º `Test users`

### 5. –ü–æ–ª—É—á–∏—Ç–µ `token.pkl`
```bash
python auth/script.py
```
–≠—Ç–æ –æ—Ç–∫—Ä–æ–µ—Ç –±—Ä–∞—É–∑–µ—Ä, –≥–¥–µ –≤—ã –∞–≤—Ç–æ—Ä–∏–∑—É–µ—Ç–µ—Å—å —á–µ—Ä–µ–∑ Gmail. –í —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ —Å–æ–∑–¥–∞—Å—Ç—Å—è —Ñ–∞–π–ª `token.pkl`.

### 6. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç–∞
```bash
python bot.py
```

---

## üìÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞
```
project/
‚îú‚îÄ‚îÄ bot.py                  # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞
‚îú‚îÄ‚îÄ config.py               # –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
‚îú‚îÄ‚îÄ messages.py             # –¢–µ–∫—Å—Ç—ã —Å–æ–æ–±—â–µ–Ω–∏–π
‚îú‚îÄ‚îÄ .env                    # –°–µ–∫—Ä–µ—Ç—ã (–Ω–µ –≤ git)
‚îú‚îÄ‚îÄ token.pkl               # OAuth —Ç–æ–∫–µ–Ω Gmail
‚îú‚îÄ‚îÄ client_secret.json      # OAuth client (Gmail API)
‚îÇ
‚îú‚îÄ‚îÄ routers/                # –í—Å–µ —Ä–æ—É—Ç–µ—Ä—ã (–º–æ–¥—É–ª–∏ –ª–æ–≥–∏–∫–∏)
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py         # –ê–≤—Ç–æ–∑–∞–≥—Ä—É–∑–∫–∞ —Ä–æ—É—Ç–µ—Ä–æ–≤
‚îÇ   ‚îî‚îÄ‚îÄ email_router.py     # Email —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å
‚îÇ
‚îú‚îÄ‚îÄ services/               # –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
‚îÇ   ‚îî‚îÄ‚îÄ email_sender.py     # –û—Ç–ø—Ä–∞–≤–∫–∞ email
‚îÇ
‚îú‚îÄ‚îÄ keyboards/              # Inline –º–µ–Ω—é
‚îÇ   ‚îî‚îÄ‚îÄ email_ui.py         # –ö–Ω–æ–ø–∫–∏ –¥–ª—è email —Ä–µ–∂–∏–º–∞
‚îÇ
‚îî‚îÄ‚îÄ auth/
    ‚îî‚îÄ‚îÄ script.py           # –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–æ–∫–µ–Ω–∞ OAuth
```

---

## ‚öôÔ∏è –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (`ALLOWED_USER_IDS`)
- –û—Ç–ø—Ä–∞–≤–∫–∞ email —Å –≤–ª–æ–∂–µ–Ω–∏—è–º–∏ –∏ —Ç–µ–∫—Å—Ç–æ–º
- Inline-–º–µ–Ω—é —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
  - –í–∫–ª—é—á–µ–Ω–∏–µ —Ä–µ–∂–∏–º–∞ email
  - –°–º–µ–Ω–∞ –ø–æ–ª—É—á–∞—Ç–µ–ª—è
  - –°–±—Ä–æ—Å —á–µ—Ä–Ω–æ–≤–∏–∫–∞ –∏ —Ñ–∞–π–ª–æ–≤
  - –ü—Ä–æ—Å–º–æ—Ç—Ä —Ç–µ–∫—É—â–∏—Ö –≤–ª–æ–∂–µ–Ω–∏–π –∏ email-–∞–¥—Ä–µ—Å–∞

---

## üõ° –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
- `token.pkl` –∏ `client_secret.json` –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –≤ `.gitignore`
- –ù–µ –¥–µ–ª–∏—Ç–µ—Å—å –∏–º–∏ –ø—É–±–ª–∏—á–Ω–æ ‚Äî –æ–Ω–∏ —Å–æ–¥–µ—Ä–∂–∞—Ç –¥–æ—Å—Ç—É–ø –∫ Gmail

---

## ‚úÖ –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã
| –ö–æ–º–∞–Ω–¥–∞      | –û–ø–∏—Å–∞–Ω–∏–µ                         |
|--------------|----------------------------------|
| `/start`     | –ó–∞–ø—É—Å–∫ –∏ –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ             |
| `/menu`      | –í—ã–∑–æ–≤ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –º–µ–Ω—é             |

–ü–æ-—É–º–æ–ª—á–∞–Ω–∏—é –≤—ã–∫–ª—é—á–µ–Ω —Ä–µ–∂–∏–º –æ—Ç–ø—Ä–∞–≤–∫–∏ –∏–º–µ–π–ª–æ–≤, —á—Ç–æ–±—ã –ø–µ—Ä–µ–π—Ç–∏ –≤ –Ω–µ–≥–æ, –Ω—É–∂–Ω–æ –Ω–∞–∂–∞—Ç—å –Ω–∞ –∫–Ω–æ–ø–∫—É –∏–∑ –º–µ–Ω—é. –ë–µ–∑ –≤—Ö–æ–¥–∞ –≤ —Ä–µ–∂–∏–º –æ—Ç–ø—Ä–∞–≤–∫–∏ –±–æ—Ç –≤ —Ä–µ–∂–∏–º–µ echo - –ø–æ–≤—Ç–æ—Ä—è–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏—è, –Ω–∞–ø–∏—Å–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º. –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è.

---

## üìå –°–æ–≤–µ—Ç—ã
- –õ—É—á—à–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω—ã–π Gmail-–∞–∫–∫–∞—É–Ω—Ç –¥–ª—è —Ä–∞–±–æ—Ç—ã –±–æ—Ç–∞
- –ú–æ–∂–Ω–æ —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—å –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ —Å `pm2`, `systemd`, `screen` –∏–ª–∏ `tmux`
- –ò–º–µ–π–ª —Å –∫–æ—Ç–æ—Ä–æ–≥–æ –∏ –Ω–∞ –∫–æ—Ç–æ—Ä—ã–π –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –ø–∏—Å—å–º–∞ –ø–æ-—É–º–æ–ª—á–∞–Ω–∏—é —É–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –≤ .env

---

## üîó –õ–∏—Ü–µ–Ω–∑–∏—è
MIT. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ, —Ä–∞–∑–≤–∏–≤–∞–π—Ç–µ –∏ –∞–¥–∞–ø—Ç–∏—Ä—É–π—Ç–µ –ø–æ–¥ —Å–µ–±—è.

---

**–ê–≤—Ç–æ—Ä:** chatgpt