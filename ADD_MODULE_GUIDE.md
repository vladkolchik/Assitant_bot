# üì¶ –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è: –ö–∞–∫ –¥–æ–±–∞–≤–∏—Ç—å —Å–≤–æ–π –º–æ–¥—É–ª—å (plug-and-play)

## 1. –°–æ–∑–¥–∞–π—Ç–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—É –º–æ–¥—É–ª—è

–í –ø–∞–ø–∫–µ `routers/` —Å–æ–∑–¥–∞–π—Ç–µ –ø–æ–¥–ø–∞–ø–∫—É —Å —É–Ω–∏–∫–∞–ª—å–Ω—ã–º –∏–º–µ–Ω–µ–º –≤–∞—à–µ–≥–æ –º–æ–¥—É–ª—è, –Ω–∞–ø—Ä–∏–º–µ—Ä, `my_module`:

```
routers/
  my_module/
    __init__.py
    router.py
    messages.py
    (config.py)         # –µ—Å–ª–∏ –Ω—É–∂–Ω—ã —Å–≤–æ–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
    (keyboards.py)      # –µ—Å–ª–∏ –Ω—É–∂–Ω—ã —Å–≤–æ–∏ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã
    (services/)         # –µ—Å–ª–∏ –µ—Å—Ç—å –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
```

---

## 2. –†–µ–∞–ª–∏–∑—É–π—Ç–µ —Ä–æ—É—Ç–µ—Ä

–í `router.py`:
- –°–æ–∑–¥–∞–π—Ç–µ –æ–±—ä–µ–∫—Ç `Router` –∏–∑ aiogram.
- –û–ø–∏—à–∏—Ç–µ —Ö–µ–Ω–¥–ª–µ—Ä—ã (–æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∫–æ–º–∞–Ω–¥, —Å–æ–æ–±—â–µ–Ω–∏–π, callback –∏ —Ç.–¥.).
- –ò–º–ø–æ—Ä—Ç–∏—Ä—É–π—Ç–µ —Å–≤–æ–∏ —Å–æ–æ–±—â–µ–Ω–∏—è –∏–∑ `messages.py`.
- –ï—Å–ª–∏ –Ω—É–∂–Ω—ã –≥–ª–æ–±–∞–ª—å–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è (`start`, `no_access`), –∏–º–ø–æ—Ä—Ç–∏—Ä—É–π—Ç–µ –∏—Ö –∏–∑ –∫–æ—Ä–Ω–µ–≤–æ–≥–æ `messages.py`:
  ```python
  from .messages import MESSAGES  # –ª–æ–∫–∞–ª—å–Ω—ã–µ
  from messages import MESSAGES as GLOBAL_MESSAGES  # –≥–ª–æ–±–∞–ª—å–Ω—ã–µ
  ```

**‚ö†Ô∏è –í–∞–∂–Ω–æ –¥–ª—è callback_query –≤ aiogram 3.x:**
```python
from aiogram import F

# –ü—Ä–∞–≤–∏–ª—å–Ω–æ:
@my_module_router.callback_query(F.data == "my_callback")

# –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ:
@my_module_router.callback_query(text="my_callback")  # –°—Ç–∞—Ä—ã–π —Å–∏–Ω—Ç–∞–∫—Å–∏—Å 2.x
```

---

## 3. –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–π—Ç–µ —Ä–æ—É—Ç–µ—Ä –∏ –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ –º–µ–Ω—é

–í `__init__.py` –º–æ–¥—É–ª—è:
```python
from .router import my_module_router

# –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–ª—è –≥–ª–∞–≤–Ω–æ–≥–æ –º–µ–Ω—é (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
MENU_CONFIG = {
    'text': 'üîß –ú–æ–π –º–æ–¥—É–ª—å',           # –¢–µ–∫—Å—Ç –∫–Ω–æ–ø–∫–∏
    'callback_data': 'my_mode',        # Callback –¥–∞–Ω–Ω—ã–µ
    'order': 30                        # –ü–æ—Ä—è–¥–æ–∫ –≤ –º–µ–Ω—é (–º–µ–Ω—å—à–µ = –≤—ã—à–µ)
}
```

**–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –º–µ–Ω—é:**
- –ï—Å–ª–∏ –¥–æ–±–∞–≤–∏—Ç–µ `MENU_CONFIG` - –∫–Ω–æ–ø–∫–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ—è–≤–∏—Ç—Å—è –≤ –≥–ª–∞–≤–Ω–æ–º –º–µ–Ω—é
- –ï—Å–ª–∏ –Ω–µ –¥–æ–±–∞–≤–∏—Ç–µ - –º–æ–¥—É–ª—å –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å, –Ω–æ –±–µ–∑ –∫–Ω–æ–ø–∫–∏ –≤ –º–µ–Ω—é
- `order` –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –ø–æ–∑–∏—Ü–∏—é: 10, 20, 30... (–º–µ–Ω—å—à–µ —á–∏—Å–ª–æ = –≤—ã—à–µ –≤ –º–µ–Ω—é)

---

## 4. –î–æ–±–∞–≤—å—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏—è

–í `messages.py` –º–æ–¥—É–ª—è:
- –û–ø–∏—Å—ã–≤–∞–π—Ç–µ —Ç–æ–ª—å–∫–æ —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ –¥–ª—è —ç—Ç–æ–≥–æ –º–æ–¥—É–ª—è —Å–æ–æ–±—â–µ–Ω–∏—è.
- –ù–µ –¥—É–±–ª–∏—Ä—É–π—Ç–µ –≥–ª–æ–±–∞–ª—å–Ω—ã–µ (`start`, `no_access`).

---

## 5. (–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) –î–æ–±–∞–≤—å—Ç–µ —Å–µ—Ä–≤–∏—Å—ã, –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã, –∫–æ–Ω—Ñ–∏–≥

- –ï—Å–ª–∏ –º–æ–¥—É–ª—é –Ω—É–∂–Ω—ã —Å–≤–æ–∏ —Å–µ—Ä–≤–∏—Å—ã ‚Äî —Å–æ–∑–¥–∞–π—Ç–µ –ø–∞–ø–∫—É `services/` –≤–Ω—É—Ç—Ä–∏ –º–æ–¥—É–ª—è.
- –ï—Å–ª–∏ –Ω—É–∂–Ω—ã –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã ‚Äî —Ñ–∞–π–ª `keyboards.py`.
- –ï—Å–ª–∏ –Ω—É–∂–Ω—ã –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ ‚Äî —Ñ–∞–π–ª `config.py` (–∏ –±—Ä–∞—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ —Ç–æ–ª—å–∫–æ –∏–∑ –Ω–µ–≥–æ).

---

## 6. –ù–µ —Ç—Ä–æ–≥–∞–π—Ç–µ –¥—Ä—É–≥–∏–µ —Ñ–∞–π–ª—ã –ø—Ä–æ–µ–∫—Ç–∞

- –ù–µ –Ω—É–∂–Ω–æ –Ω–∏—á–µ–≥–æ –º–µ–Ω—è—Ç—å –≤ `bot.py`, `routers/__init__.py`, –æ–±—â–µ–º `messages.py` –∏ —Ç.–¥.
- –ù–ï –ù–£–ñ–ù–û –º–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å `keyboards/email_ui.py` –∏–ª–∏ –¥—Ä—É–≥–∏–µ —Ñ–∞–π–ª—ã –º–æ–¥—É–ª–µ–π
- –ú–æ–¥—É–ª—å –ø–æ–¥—Ö–≤–∞—Ç–∏—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –±–ª–∞–≥–æ–¥–∞—Ä—è –∞–≤—Ç–æ–∑–∞–≥—Ä—É–∑–∫–µ —Ä–æ—É—Ç–µ—Ä–æ–≤.
- –ö–Ω–æ–ø–∫–∞ –≤ –≥–ª–∞–≤–Ω–æ–º –º–µ–Ω—é –ø–æ—è–≤–∏—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏, –µ—Å–ª–∏ –µ—Å—Ç—å `MENU_CONFIG`.

---

## 7. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–±–æ—Ç—É

- –ó–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç–∞.
- –ù–æ–≤—ã–π –º–æ–¥—É–ª—å –±—É–¥–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–¥–∫–ª—é—á—ë–Ω, –µ—Å–ª–∏ —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç –æ–±—ä–µ–∫—Ç Router.
- –ö–Ω–æ–ø–∫–∞ –ø–æ—è–≤–∏—Ç—Å—è –≤ –≥–ª–∞–≤–Ω–æ–º –º–µ–Ω—é, –µ—Å–ª–∏ –¥–æ–±–∞–≤–∏–ª–∏ `MENU_CONFIG`.

---

## 8. –ü—Ä–∏–º–µ—Ä –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–≥–æ –º–æ–¥—É–ª—è

**routers/hello_module/__init__.py**
```python
from .router import hello_module_router

# –ö–Ω–æ–ø–∫–∞ –≤ –≥–ª–∞–≤–Ω–æ–º –º–µ–Ω—é
MENU_CONFIG = {
    'text': 'üëã –ü—Ä–∏–≤–µ—Ç',
    'callback_data': 'hello_mode',
    'order': 50
}
```

**routers/hello_module/router.py**
```python
from aiogram import Router, F
from aiogram.types import Message, CallbackQuery
from .messages import MESSAGES

hello_module_router = Router()

# –û–±—Ä–∞–±–æ—Ç–∫–∞ callback –∫–Ω–æ–ø–∫–∏ –∏–∑ –≥–ª–∞–≤–Ω–æ–≥–æ –º–µ–Ω—é
@hello_module_router.callback_query(F.data == "hello_mode")
async def hello_callback(callback: CallbackQuery):
    await callback.message.answer(MESSAGES["hello"])
    await callback.answer()

# –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
@hello_module_router.message()
async def hello_handler(message: Message):
    await message.answer(MESSAGES["hello"])
```

**routers/hello_module/messages.py**
```python
MESSAGES = {
    "hello": "–ü—Ä–∏–≤–µ—Ç! –≠—Ç–æ –Ω–æ–≤—ã–π –º–æ–¥—É–ª—å üëã"
}
```

---

## 9. –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

- –î–∞–≤–∞–π—Ç–µ –æ–±—ä–µ–∫—Ç—É Router —É–Ω–∏–∫–∞–ª—å–Ω–æ–µ –∏–º—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, `my_module_router`), —á—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤.
- –í—Å–µ –∏–º–ø–æ—Ä—Ç—ã –≤–Ω—É—Ç—Ä–∏ –º–æ–¥—É–ª—è –¥–µ–ª–∞–π—Ç–µ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–º–∏ (`from .messages import MESSAGES`).
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ —Ñ–∏–ª—å—Ç—Ä—ã –¥–ª—è callback_query: `F.data == "specific_value"`.
- –ù–µ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –æ–±—â–∏–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ `@router.callback_query()` –±–µ–∑ —Ñ–∏–ª—å—Ç—Ä–æ–≤ - –æ–Ω–∏ –ø–µ—Ä–µ—Ö–≤–∞—Ç—ã–≤–∞—é—Ç –≤—Å–µ —Å–æ–±—ã—Ç–∏—è.
- –î–ª—è —Å–ª–æ–∂–Ω—ã—Ö –º–æ–¥—É–ª–µ–π –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–≤–æ—é –ø–∞–ø–∫—É `services/` –∏/–∏–ª–∏ `config.py`.
- –í—ã–±–∏—Ä–∞–π—Ç–µ `order` –∫—Ä–∞—Ç–Ω—ã–º 10 (10, 20, 30...) –¥–ª—è —É–¥–æ–±—Å—Ç–≤–∞ –≤—Å—Ç–∞–≤–∫–∏ –Ω–æ–≤—ã—Ö –º–æ–¥—É–ª–µ–π.

---

## 10. –ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

### –ú–æ–¥—É–ª—å –Ω–µ –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è:
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –≤ –ø–∞–ø–∫–µ –º–æ–¥—É–ª—è –µ—Å—Ç—å `__init__.py` –∏ –æ–Ω —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç –æ–±—ä–µ–∫—Ç Router.
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∏–º—è –æ–±—ä–µ–∫—Ç–∞ Router —É–Ω–∏–∫–∞–ª—å–Ω–æ.

### –ö–Ω–æ–ø–∫–∞ –Ω–µ –ø–æ—è–≤–ª—è–µ—Ç—Å—è –≤ –º–µ–Ω—é:
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ `MENU_CONFIG` –¥–æ–±–∞–≤–ª–µ–Ω –≤ `__init__.py` –º–æ–¥—É–ª—è.
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ (–Ω—É–∂–Ω—ã 'text', 'callback_data').
- –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç–∞.

### Callback –Ω–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è:
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Å–∏–Ω—Ç–∞–∫—Å–∏—Å: `F.data == "callback_name"`.
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ `callback_data` –≤ `MENU_CONFIG` —Å–æ–≤–ø–∞–¥–∞–µ—Ç —Å —Ñ–∏–ª—å—Ç—Ä–æ–º –≤ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–µ.
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–ª–∏ `from aiogram import F`.

### –ö–æ–Ω—Ñ–ª–∏–∫—Ç—ã —Å –¥—Ä—É–≥–∏–º–∏ –º–æ–¥—É–ª—è–º–∏:
- –ù–µ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –æ–±—â–∏–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ `@router.callback_query()` –±–µ–∑ —Ñ–∏–ª—å—Ç—Ä–æ–≤.
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —É–Ω–∏–∫–∞–ª—å–Ω—ã–µ –Ω–∞–∑–≤–∞–Ω–∏—è –¥–ª—è callback_data.
- –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –ø—Ä–∏–º–µ—Ä—ã –≤ –¥—Ä—É–≥–∏—Ö –º–æ–¥—É–ª—è—Ö –∏–ª–∏ –æ–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ aiogram.

---

**–¢–µ–ø–µ—Ä—å –≤—ã –º–æ–∂–µ—Ç–µ –ª–µ–≥–∫–æ —Ä–∞—Å—à–∏—Ä—è—Ç—å —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –±–æ—Ç–∞, –ø—Ä–æ—Å—Ç–æ –¥–æ–±–∞–≤–ª—è—è –Ω–æ–≤—ã–µ –º–æ–¥—É–ª–∏ –≤ –ø–∞–ø–∫—É `routers/`! –°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–¥—Ö–≤–∞—Ç–∏—Ç –≤–∞—à –º–æ–¥—É–ª—å –∏ –¥–æ–±–∞–≤–∏—Ç –∫–Ω–æ–ø–∫—É –≤ –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é.** 